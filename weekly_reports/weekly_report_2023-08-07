

2023-08-07 - 2023-08-13

1) #1756, New Term Sheet process
   Made Term Sheet link for secondary Deal menu
   It visible in all stages after Lead and have dropdown link
   Create if TermSheetApproval does not exist
   Approving if TermSheetApproval not completed
   Download if Deal have Term Sheet in documents
   Upload if Deal not in Term Sheet stage and do not have Term Sheet in documents
   After Create creating TermSheetApproval in stage generate and redirect to #edit
   In this stage page have selector WireInfos if rd_debt_fund_2 is Deal Syndicate
   After selecting Wire Info, enable button Start Generating by specific for this stage Stimulus controller
   After click that button it disabled and on frontend start creating Term Sheet docx
   And uploading in Dropbox, by stimulus & native js
   After uploading fill in hidden fields for DropboxFile
   Then in Stimulus change TermSheetApproval stage, open Dropbox docx editor in new window and submit form
   Next stage page have link Continue Editing and button Submit for approve
   All TermSheetApproval stages have Audits table on the bottom
   Which have CustomAudits for activities
   CustomAudits creates in TermSheetApprovalsController and, mostly, in Stimulus controllers
   Submit for Approve click change stage in specific Stimulus controller for this stage
   And submit form
   Also editing stage page have checkbox Send Email.
   If it checked, in TermSheetApprovalsController builds SentEmail from EmailNotification for TermSheetApproval
   Pending Approval stage page have form for SentEmail and buttons REQUEST CHANGES & APPROVE
   Buttons visible only for users, which have :real_estate_term_sheet_approver role
   If buttons click, stimulus change stage in hidden field and submit form
   And creates CustomAudit with specific description
   Next stage, approved, have buttons Revoke Approval & Completed, checkbox Final Approve
   Its visible only for users, which have :real_estate_term_sheet_approver role
   And buttons Upload Term Sheet & Send to Slack
   Send to Slack click downloading Term Sheet from Dropbox and sent to Slack
   All on frontend, by stimulus
   Then created SentSlack, changes stage in hidden field and submit form
   In this stage, completed, page redirect to Deal Profile
   Result 78h 17m
   52 files changed, +2097 -227
------------------------------
